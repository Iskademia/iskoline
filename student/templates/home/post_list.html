{% extends 'home/base.html' %} {% load crispy_forms_tags %} {% block content %}
<div class="container">
  <div class="row justify-content-center mt-3">
    <div class="post col-md-5 col-sm-12">
      <h5>What's your concern?</h5>
    </div>
  </div>
  <div class="row justify-content-center mt-3 mb-5">
    <div class="col-md-5 col-sm-12">
      <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="username">
          <label>Description: </label>
          <textarea name="body"></textarea>
          <!-- {{form.description}} -->
        </div>
        <div class="username">
          <label>Upload image: </label>
          <input type="file" name="image" />
          <!-- {{form.post_image}} -->
        </div>
        <div class="d-grid gap-2">
          <button class="btn btn-success mt-3">Submit!</button>
        </div>
      </form>
    </div>
  </div>
  {% for post in post_list %}
  <div class="row justify-content-center mt-3">
    <div class="post-body col-md-10 col-sm-12 position-relative">
      <div>
        {% if post.author.profile.picture %}
        <img class="rounded-circle mr-3" height="50" width="50" src="{{ post.author.profile.picture.url }}" />
        {% else %}
        <img src="https://res.cloudinary.com/dmagk9gck/image/upload/v1652844857/media/uploads/default_u8embw.jpg" class="rounded-circle mr-3" width="50" height="50" />
        {% endif %}
        <a class="profile-link" href="{% url 'profile' post.author.profile.pk %}">{{ post.author }}</a>
        {{ post.date | date:"F d, Y"}}
      </div>
      <div class="post-content position-relative">
        <p>{{ post.body }}</p>
        {% if post.image %}
        <div class="image">
          <img src="{{ post.image.url }}" class="post-image" />
        </div>  
        {% endif %}
        <a class="stretched-link" href="{% url 'post_detail' post.pk %}"></a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock content %}
